pipeline:
  name: test-capture-overwrite
  jobs:
    - name: test-capture-overwrite
      steps:
        - name: capture-test-step-1
          run: echo "The version is " >> $VERSION_1
        - name: test-1
          working-directory: scripts
          run: ./validate-equal-arguments.sh "$VERSION_1" "The version is "
        - name: capture-test-step-2
          run: mvn org.apache.maven.plugins:maven-help-plugin:3.2.0:evaluate -Dexpression=project.version -q -DforceStdout >> $VERSION_1
        - name: test-2
          working-directory: scripts
          run: |
            ../pipeliner --version --minimal > $VERSION_2
            ./validate-equal-arguments.sh "The version is $VERSION_2" "$VERSION_1"
        - name: capture-test-step-3
          run: echo "Overwritten value" > $VERSION
        - name: test-3
          working-directory: scripts
          run: ./validate-equal-arguments.sh "$VERSION" "Overwritten value"
        - name: echo-version
          run: echo "$VERSION"
        - name: test-4
          working-directory: scripts
          run: ./validate-equal-arguments.sh "${{ INPUT_VERSION }}" "Overwritten value"
