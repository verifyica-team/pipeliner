pipeline:
  name: all
  jobs:
    - name: all
      env:
        FOO_FOO: bar.bar
      with:
        foo: bar
      steps:
        - name: tests/test-properties-1.yaml
          run: $PIPELINER tests/test-properties-1.yaml
        - name: tests/test-properties-2.yaml
          run: $PIPELINER tests/test-properties-2.yaml
        - name: tests/test-properties-3.yaml
          run: $PIPELINER tests/test-properties-3.yaml
        - name: tests/test-properties-4.yaml
          run: $PIPELINER tests/test-properties-4.yaml
        - name: tests/test-properties-5.yaml
          run: |
            --pipeline tests/test-properties-5.yaml
            # Previous pipeline exports property version.1
            echo "expected test string" = ${{ version.1 }}
        - name: tests/test-properties-mask-1.yaml
          run: $PIPELINER tests/test-properties-mask-1.yaml
        - name: tests/test-properties-mask-2.yaml
          run: $PIPELINER tests/test-properties-mask-2.yaml
        - name: tests/test-capture-append.yaml
          run: $PIPELINER tests/test-capture-append.yaml
        - name: tests/test-capture-overwrite.yaml
          run: $PIPELINER tests/test-capture-overwrite.yaml
        - name: tests/test-capture-prefix.yaml
          run: $PIPELINER tests/test-capture-prefix.yaml
        - name: tests/test-command-list-property.yaml
          # Requires env FOO_FOO
          # Requires property foo
          run: $PIPELINER tests/test-command-line-property.yaml
        - name: tests/test-command-list-property.yaml
          # Requires env FOO_FOO
          # Requires property foo
          run: $PIPELINER tests/test-command-line-property.yaml
        - name: test command line property
          run: |
            echo test-command-line-property-step.property = ${{ test-command-line-property-step.property }}
        - name: tests/test-redirects.yaml
          run: $PIPELINER tests/test-redirects.yaml
        - name: tests/test-working-directory.yaml
          run: $PIPELINER tests/test-working-directory.yaml
        - name: tests/test-extensions-1.yaml
          run: $PIPELINER tests/test-extensions-1.yaml
        - name: tests/test-extensions-2.yaml
          run: $PIPELINER tests/test-extensions-2.yaml
        - name: tests/test-shells.yaml
          run: $PIPELINER tests/test-shells.yaml
        - name: tests/test-timeout-minutes.yaml
          run: $PIPELINER tests/test-timeout-minutes.yaml
        - name: tests/test-pipeliner-variables.yaml
          run: $PIPELINER tests/test-pipeliner-variables.yaml
        - name: tests/test-unresolved-variables.yaml
          run: $PIPELINER tests/test-unresolved-variables.yaml
        - name: tests/test-quoted-variables.yaml
          run: $PIPELINER tests/test-quoted-variables.yaml
        - name: tests/test-line-continuations.yaml
          run: $PIPELINER tests/test-line-continuations.yaml
    - name: all (--pipeline directive)
      steps:
        - name: tests/test-properties-1.yaml
          run: --pipeline tests/test-properties-1.yaml
        - name: tests/test-properties-2.yaml
          run: --pipeline tests/test-properties-2.yaml
        - name: tests/test-properties-3.yaml
          run: --pipeline tests/test-properties-3.yaml
        - name: tests/test-properties-4.yaml
          run: --pipeline tests/test-properties-4.yaml
        - name: tests/test-properties-5.yaml
          run: --pipeline tests/test-properties-5.yaml
        - name: tests/test-properties-mask-1.yaml
          run: --pipeline tests/test-properties-mask-1.yaml
        - name: tests/test-properties-mask-2.yaml
          run: --pipeline tests/test-properties-mask-2.yaml
        - name: tests/test-capture-append.yaml
          run: --pipeline tests/test-capture-append.yaml
        - name: tests/test-capture-overwrite.yaml
          run: --pipeline tests/test-capture-overwrite.yaml
        - name: tests/test-capture-prefix.yaml
          run: --pipeline tests/test-capture-prefix.yaml
        - name: tests/test-command-list-property.yaml
          run: --pipeline -P foo=bar -E FOO_FOO=bar.bar tests/test-command-line-property.yaml
        - name: tests/test-command-list-property.yaml
          run: --pipeline --with foo=bar --env FOO_FOO=bar.bar tests/test-command-line-property.yaml
        - name: tests/test-redirects.yaml
          run: --pipeline tests/test-redirects.yaml
        - name: tests/test-working-directory.yaml
          run: --pipeline tests/test-working-directory.yaml
        - name: tests/test-extensions-1.yaml
          run: --pipeline tests/test-extensions-1.yaml
        - name: tests/test-extensions-2.yaml
          run: --pipeline tests/test-extensions-2.yaml
        - name: tests/test-shells.yaml
          run: --pipeline tests/test-shells.yaml
        - name: tests/test-timeout-minutes.yaml
          run: --pipeline tests/test-timeout-minutes.yaml
        - name: tests/test-pipeliner-variables.yaml
          run: --pipeline tests/test-pipeliner-variables.yaml
        - name: tests/test-unresolved-variables.yaml
          run: --pipeline tests/test-unresolved-variables.yaml
        - name: tests/test-quoted-variables.yaml
          run: --pipeline tests/test-quoted-variables.yaml
        - name: tests/test-line-continuations.yaml
          run: --pipeline tests/test-line-continuations.yaml
