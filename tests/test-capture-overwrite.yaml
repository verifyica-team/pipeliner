pipeline:
  name: test-capture-overwrite
  with:
    test.scripts.directory: $PIPELINER_HOME/tests/scripts
  jobs:
    - name: test-capture-overwrite
      steps:
        - name: step-1
          run: |
            echo "The version is " > $version
        - name: step-2
          run: |
            ${{ test.scripts.directory }}/test-arguments-are-equal.sh "${{ version }}" "The version is "
        - name: step-2
          run: |
            ./mvnw org.apache.maven.plugins:maven-help-plugin:3.2.0:evaluate -Dexpression=project.version -q -DforceStdout > $version
            ${{ test.scripts.directory }}/test-arguments-are-not-equal.sh "${{ version }}" "The version is "
        - name: step-3
          with:
            version.2: ${{ version }}
          run: |
            $PIPELINER --version > $version.2
            ${{ test.scripts.directory }}/test-arguments-are-equal.sh "${{ version.2 }}" "${{ version }}"
